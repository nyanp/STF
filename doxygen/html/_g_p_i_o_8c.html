<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>STF: stf/environment/sh/GPIO.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- ä½œæˆï¼š Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'æ¤œç´¢');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">STF</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸</span></a></li>
      <li><a href="pages.html"><span>é–¢é€£ãƒšãƒ¼ã‚¸</span></a></li>
      <li><a href="namespaces.html"><span>ãƒãƒ¼ãƒ ã‚¹ãƒšãƒ¼ã‚¹</span></a></li>
      <li><a href="annotated.html"><span>ã‚¯ãƒ©ã‚¹</span></a></li>
      <li class="current"><a href="files.html"><span>ãƒ•ã‚¡ã‚¤ãƒ«</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="æ¤œç´¢" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§</span></a></li>
      <li><a href="globals.html"><span>ãƒ•ã‚¡ã‚¤ãƒ«ãƒ¡ãƒ³ãƒ</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#define-members">ãƒã‚¯ãƒ­å®šç¾©</a> &#124;
<a href="#func-members">é–¢æ•°</a>  </div>
  <div class="headertitle">
<h1>stf/environment/sh/GPIO.c</h1>  </div>
</div>
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="">ioexpander.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="">i2c_emu.h</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
GPIO.cã®ã‚¤ãƒ³ã‚¯ãƒ«ãƒ¼ãƒ‰ä¾å­˜é–¢ä¿‚å›³</div>
<div class="dyncontent">
<div class="center"><img src="_g_p_i_o_8c__incl.png" border="0" usemap="#stf_2environment_2sh_2_g_p_i_o_8c" alt=""/></div>
<map name="stf_2environment_2sh_2_g_p_i_o_8c" id="stf_2environment_2sh_2_g_p_i_o_8c">
<area shape="rect" id="node3" href="ioexpander_8h.html" title="ioexpander.h" alt="" coords="5,160,101,189"/><area shape="rect" id="node5" href="i2c__emu_8h.html" title="i2c_emu.h" alt="" coords="91,83,173,112"/><area shape="rect" id="node7" href="stf_2environment_2sh_2iodefine_8h.html" title="iodefine.h" alt="" coords="125,160,203,189"/></map>
</div>
</div>
<p><a href="">ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã‚‹ã€‚</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
ãƒã‚¯ãƒ­å®šç¾©</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_g_p_i_o_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>&#160;&#160;&#160;0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_g_p_i_o_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>&#160;&#160;&#160;1</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
é–¢æ•°</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_g_p_i_o_8c.html#ad80dc832ccc32a4036c495327aefca36">i2c_test</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_g_p_i_o_8c.html#a5730d9445429351b9f750084c5cb5aae">i2c_init</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_g_p_i_o_8c.html#af853e44e248dcee76783f0cbca2bef29">w2_i2c_init</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_g_p_i_o_8c.html#a0cf70c9d19898f6642919a75bb84bb78">w3_i2c_init</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_g_p_i_o_8c.html#ac81edf1aac516c6439bf8a5658a11e96">i2c_startbit</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_g_p_i_o_8c.html#a0dd357ea7dfd3dbec448fb585426b433">w2_i2c_startbit</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_g_p_i_o_8c.html#acaa592ef26c2628101baf22cb710dc2a">w3_i2c_startbit</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_g_p_i_o_8c.html#a86bb9a6c49ca0986ac38375fbe5f84c3">i2c_stopbit</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_g_p_i_o_8c.html#a2b9aa0bd7bd232f1e67c77a938bd15d8">w2_i2c_stopbit</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_g_p_i_o_8c.html#ab4940c46a9b1ad749974f8e0513b5b34">w3_i2c_stopbit</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">signed int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_g_p_i_o_8c.html#a6c4f1157b759a1173b95723baf66697c">i2c_send_byte</a> (unsigned char data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">signed int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_g_p_i_o_8c.html#aee16400315835a401d5631a5bde33ef1">w2_i2c_send_byte</a> (unsigned char data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">signed int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_g_p_i_o_8c.html#a1b8e4cc39899fa6b9b700de08d570166">w3_i2c_send_byte</a> (unsigned char data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_g_p_i_o_8c.html#ae2dd3ce361ec0370e83762c173ad348d">i2c_write</a> (unsigned char addr, unsigned char data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_g_p_i_o_8c.html#a32c270cb5e51841db78ac5445925fb44">w2_i2c_write</a> (unsigned char addr, unsigned char data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_g_p_i_o_8c.html#a1b4f14436e98865baf42059f96b0fc9e">w3_i2c_write</a> (unsigned char addr, unsigned char data)</td></tr>
</table>
<hr/><h2>ãƒã‚¯ãƒ­å®šç¾©</h2>
<a class="anchor" id="aa93f0eb578d23995850d61f7d61c55c1"></a><!-- doxytag: member="GPIO.c::FALSE" ref="aa93f0eb578d23995850d61f7d61c55c1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FALSE&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="">GPIO.c</a> ã® <a class="el" href="#L10">10</a> è¡Œã§å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚</p>

</div>
</div>
<a class="anchor" id="aa8cecfc5c5c054d2875c03e77b7be15d"></a><!-- doxytag: member="GPIO.c::TRUE" ref="aa8cecfc5c5c054d2875c03e77b7be15d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRUE&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="">GPIO.c</a> ã® <a class="el" href="#L11">11</a> è¡Œã§å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚</p>

</div>
</div>
<hr/><h2>é–¢æ•°</h2>
<a class="anchor" id="a5730d9445429351b9f750084c5cb5aae"></a><!-- doxytag: member="GPIO.c::i2c_init" ref="a5730d9445429351b9f750084c5cb5aae" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void i2c_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="">GPIO.c</a> ã® <a class="el" href="#L30">30</a> è¡Œã§å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚</p>
<div class="fragment"><pre class="fragment">{
         <a class="code" href="i2c__emu_8h.html#a8eb929594329adf33c88bc5c2da2704b">SCL_REL</a>;
         <a class="code" href="i2c__emu_8h.html#af1b7863404cbfd8306b0e6efcacefcc3">SDA_REL</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6c4f1157b759a1173b95723baf66697c"></a><!-- doxytag: member="GPIO.c::i2c_send_byte" ref="a6c4f1157b759a1173b95723baf66697c" args="(unsigned char data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">signed int i2c_send_byte </td>
          <td>(</td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="">GPIO.c</a> ã® <a class="el" href="#L183">183</a> è¡Œã§å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚</p>
<div class="fragment"><pre class="fragment">{
        <span class="comment">/* assume SCL = SDA = L */</span>
        <span class="keywordtype">signed</span> <span class="keywordtype">int</span> ack;
        <span class="keyword">volatile</span> <span class="keywordtype">int</span> i;
        <span class="keywordflow">for</span>(i = 0; i&lt;8; i++){
                <span class="keywordflow">if</span>(<a class="code" href="namespacenj.html#a54b165e7142279e06643f15f96fb3385">data</a> &amp; 0x80){  <span class="comment">//ãˆÊ‚©‚ç1bit‚Ã‚ÂSDA‚É‚Ì‚¹‚Ä“]‘—</span>
                        <a class="code" href="i2c__emu_8h.html#af1b7863404cbfd8306b0e6efcacefcc3">SDA_REL</a>;
                }
                <span class="keywordflow">else</span>{
                        <a class="code" href="i2c__emu_8h.html#a29354baefec07e858429bc2be3716425">SDA_PUL</a>;
                }
                        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
                        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
                        <a class="code" href="i2c__emu_8h.html#a8eb929594329adf33c88bc5c2da2704b">SCL_REL</a>; <span class="comment">//SCL‚ª‚g‚Ìó‘Ô‚ÅSDA‚ğ•ÏX‚·‚é‚Æstart‚âstop‚Æ‚È‚é</span>
                        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
                        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
                <span class="keywordflow">if</span>(i != 7){
                        <a class="code" href="namespacenj.html#a54b165e7142279e06643f15f96fb3385">data</a> &lt;&lt;= 1;
                }
                <a class="code" href="i2c__emu_8h.html#a8344db8a733abaa72a97046498ffe4bb">SCL_PUL</a>;
        }
        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
        <a class="code" href="i2c__emu_8h.html#af1b7863404cbfd8306b0e6efcacefcc3">SDA_REL</a>;
        <a class="code" href="i2c__emu_8h.html#a8eb929594329adf33c88bc5c2da2704b">SCL_REL</a>;
        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
        <span class="comment">/* while(SCL_IN == 0);*/</span> <span class="comment">/* ƒXƒŒ[ƒu‚É‚æ‚éƒNƒƒbƒN‚Ğ‚«‚Ì‚Î‚µ */</span>
        ack = <a class="code" href="i2c__emu_8h.html#ac4b553fc156d15aeeeaaf6cfe7695c83">SDA_IN</a>;
        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
        <a class="code" href="i2c__emu_8h.html#a8344db8a733abaa72a97046498ffe4bb">SCL_PUL</a>;
        <a class="code" href="i2c__emu_8h.html#a29354baefec07e858429bc2be3716425">SDA_PUL</a>;               <span class="comment">//‚±‚±“¯‚É‚â‚ç‚È‚¢‚Æƒ_ƒ‚©‚à</span>
        <span class="comment">/* SCL = SDA = L */</span>
        <span class="keywordflow">return</span> ack;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac81edf1aac516c6439bf8a5658a11e96"></a><!-- doxytag: member="GPIO.c::i2c_startbit" ref="ac81edf1aac516c6439bf8a5658a11e96" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void i2c_startbit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="">GPIO.c</a> ã® <a class="el" href="#L54">54</a> è¡Œã§å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚</p>
<div class="fragment"><pre class="fragment">{
        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
        <span class="comment">//SCL‚©SDA‚ª•Ğ•û‚Å‚àƒ[‚È‚çif•¶‚É//</span>
        <span class="keywordflow">if</span>(!<a class="code" href="i2c__emu_8h.html#a10c618a025b8bdb8ea596fdc24197f49">SCL_IN</a> || !<a class="code" href="i2c__emu_8h.html#ac4b553fc156d15aeeeaaf6cfe7695c83">SDA_IN</a>){    
        <span class="comment">//ˆÈ‰ºSCL‚ğƒ[‚É‚µ‚Ä‚©‚çSDA‚ğƒnƒC‚É//</span>
                <span class="keywordflow">if</span>(<a class="code" href="i2c__emu_8h.html#a10c618a025b8bdb8ea596fdc24197f49">SCL_IN</a>){
                        <a class="code" href="i2c__emu_8h.html#a8344db8a733abaa72a97046498ffe4bb">SCL_PUL</a>;           <span class="comment">//ƒƒWƒbƒN‚k‚É</span>
                        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
                }
                <span class="keywordflow">if</span>(!<a class="code" href="i2c__emu_8h.html#ac4b553fc156d15aeeeaaf6cfe7695c83">SDA_IN</a>){
                        <a class="code" href="i2c__emu_8h.html#af1b7863404cbfd8306b0e6efcacefcc3">SDA_REL</a>;           <span class="comment">//ƒƒWƒbƒN‚g‚É</span>
                        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
                }
                <a class="code" href="i2c__emu_8h.html#a8eb929594329adf33c88bc5c2da2704b">SCL_REL</a>;               <span class="comment">//ƒƒWƒbƒN‚g‚É</span>
                <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
        }
        <span class="comment">//—¼•û‚Æ‚àƒƒWƒbƒN‚g‚É‚È‚Á‚½‚çˆÈ‰º‚Ìˆ—//</span>
        <a class="code" href="i2c__emu_8h.html#a29354baefec07e858429bc2be3716425">SDA_PUL</a>;                   <span class="comment">//ƒƒWƒbƒN‚k‚É</span>
        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
        <a class="code" href="i2c__emu_8h.html#a8344db8a733abaa72a97046498ffe4bb">SCL_PUL</a>;                   <span class="comment">//ƒƒWƒbƒN‚k‚É</span>
        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
        <span class="comment">/* SCL = SDA = L */</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a86bb9a6c49ca0986ac38375fbe5f84c3"></a><!-- doxytag: member="GPIO.c::i2c_stopbit" ref="a86bb9a6c49ca0986ac38375fbe5f84c3" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void i2c_stopbit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="">GPIO.c</a> ã® <a class="el" href="#L135">135</a> è¡Œã§å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚</p>
<div class="fragment"><pre class="fragment">{
        <span class="comment">/* assume SCL = SDA =L*/</span>
        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
        <a class="code" href="i2c__emu_8h.html#a8eb929594329adf33c88bc5c2da2704b">SCL_REL</a>;
        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
        <a class="code" href="i2c__emu_8h.html#af1b7863404cbfd8306b0e6efcacefcc3">SDA_REL</a>;
        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
        <span class="comment">/* SCL = SDA = H */</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad80dc832ccc32a4036c495327aefca36"></a><!-- doxytag: member="GPIO.c::i2c_test" ref="ad80dc832ccc32a4036c495327aefca36" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void i2c_test </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="">GPIO.c</a> ã® <a class="el" href="#L17">17</a> è¡Œã§å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚</p>
<div class="fragment"><pre class="fragment">{
        <span class="comment">/*i2c‰Šú‰»*/</span>
        <a class="code" href="_g_p_i_o_8c.html#a5730d9445429351b9f750084c5cb5aae">i2c_init</a>();

        <a class="code" href="_g_p_i_o_8c.html#ae2dd3ce361ec0370e83762c173ad348d">i2c_write</a>( 0x11, 0x11);<span class="comment">//‚â‚Î‚¢AƒGƒ‰[o‚é</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae2dd3ce361ec0370e83762c173ad348d"></a><!-- doxytag: member="GPIO.c::i2c_write" ref="ae2dd3ce361ec0370e83762c173ad348d" args="(unsigned char addr, unsigned char data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char i2c_write </td>
          <td>(</td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="">GPIO.c</a> ã® <a class="el" href="#L316">316</a> è¡Œã§å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚</p>
<div class="fragment"><pre class="fragment">                                                               { <span class="comment">//Œ³‚Í*data‚¾‚Á‚½</span>

        <a class="code" href="_g_p_i_o_8c.html#ac81edf1aac516c6439bf8a5658a11e96">i2c_startbit</a>();

        <span class="keywordflow">if</span>(<a class="code" href="_g_p_i_o_8c.html#a6c4f1157b759a1173b95723baf66697c">i2c_send_byte</a>(0x42) != 0){   <span class="comment">//slave address</span>
        <span class="comment">//      return FALSE;</span>
        }
        <span class="keywordflow">if</span>(<a class="code" href="_g_p_i_o_8c.html#a6c4f1157b759a1173b95723baf66697c">i2c_send_byte</a>(addr) != 0){   <span class="comment">//nack‚È‚çfalse</span>
        <span class="comment">//      return FALSE;</span>
        }
                <span class="keywordflow">if</span>(<a class="code" href="_g_p_i_o_8c.html#a6c4f1157b759a1173b95723baf66697c">i2c_send_byte</a>(<a class="code" href="namespacenj.html#a54b165e7142279e06643f15f96fb3385">data</a>) !=0){   <span class="comment">//nack‚È‚çfalse</span>
                <span class="comment">//      return FALSE;</span>
                }
        
        <a class="code" href="_g_p_i_o_8c.html#a86bb9a6c49ca0986ac38375fbe5f84c3">i2c_stopbit</a>();  
                
        <span class="keywordflow">return</span> <a class="code" href="_g_p_i_o_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af853e44e248dcee76783f0cbca2bef29"></a><!-- doxytag: member="GPIO.c::w2_i2c_init" ref="af853e44e248dcee76783f0cbca2bef29" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void w2_i2c_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="">GPIO.c</a> ã® <a class="el" href="#L36">36</a> è¡Œã§å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚</p>
<div class="fragment"><pre class="fragment">{
         <a class="code" href="i2c__emu_8h.html#a2f90f5328c82f470d083f67ce95e5504">W2_SCL_REL</a>;
         <a class="code" href="i2c__emu_8h.html#aa173d8a2ebddd360cb8dc47a314f5101">W2_SDA_REL</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aee16400315835a401d5631a5bde33ef1"></a><!-- doxytag: member="GPIO.c::w2_i2c_send_byte" ref="aee16400315835a401d5631a5bde33ef1" args="(unsigned char data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">signed int w2_i2c_send_byte </td>
          <td>(</td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="">GPIO.c</a> ã® <a class="el" href="#L224">224</a> è¡Œã§å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚</p>
<div class="fragment"><pre class="fragment">{
        <span class="comment">/* assume SCL = SDA = L */</span>
        <span class="keywordtype">signed</span> <span class="keywordtype">int</span> ack;
        <span class="keyword">volatile</span> <span class="keywordtype">int</span> i;
        <span class="keywordflow">for</span>(i = 0; i&lt;8; i++){
                <span class="keywordflow">if</span>(<a class="code" href="namespacenj.html#a54b165e7142279e06643f15f96fb3385">data</a> &amp; 0x80){  <span class="comment">//ãˆÊ‚©‚ç1bit‚Ã‚ÂSDA‚É‚Ì‚¹‚Ä“]‘—</span>
                        <a class="code" href="i2c__emu_8h.html#aa173d8a2ebddd360cb8dc47a314f5101">W2_SDA_REL</a>;
                }
                <span class="keywordflow">else</span>{
                        <a class="code" href="i2c__emu_8h.html#afb3e5e8c155f649c7da18b0a0880d336">W2_SDA_PUL</a>;
                }
                        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
                        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
                        <a class="code" href="i2c__emu_8h.html#a2f90f5328c82f470d083f67ce95e5504">W2_SCL_REL</a>; <span class="comment">//SCL‚ª‚g‚Ìó‘Ô‚ÅSDA‚ğ•ÏX‚·‚é‚Æstart‚âstop‚Æ‚È‚é</span>
                        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
                        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
                <span class="keywordflow">if</span>(i != 7){
                        <a class="code" href="namespacenj.html#a54b165e7142279e06643f15f96fb3385">data</a> &lt;&lt;= 1;
                }
                <a class="code" href="i2c__emu_8h.html#ac2a70fcc513b484314ffad3346670b94">W2_SCL_PUL</a>;
        }
        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
        <a class="code" href="i2c__emu_8h.html#aa173d8a2ebddd360cb8dc47a314f5101">W2_SDA_REL</a>;
        <a class="code" href="i2c__emu_8h.html#a2f90f5328c82f470d083f67ce95e5504">W2_SCL_REL</a>;
        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
        <span class="comment">/* while(SCL_IN == 0);*/</span> <span class="comment">/* ƒXƒŒ[ƒu‚É‚æ‚éƒNƒƒbƒN‚Ğ‚«‚Ì‚Î‚µ */</span>
        ack = <a class="code" href="i2c__emu_8h.html#ae9fcb5245b11fd212e7189b35e316ede">W2_SDA_IN</a>;
        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
        <a class="code" href="i2c__emu_8h.html#ac2a70fcc513b484314ffad3346670b94">W2_SCL_PUL</a>;
        <a class="code" href="i2c__emu_8h.html#afb3e5e8c155f649c7da18b0a0880d336">W2_SDA_PUL</a>;               <span class="comment">//‚±‚±“¯‚É‚â‚ç‚È‚¢‚Æƒ_ƒ‚©‚à</span>
        <span class="comment">/* SCL = SDA = L */</span>
        <span class="keywordflow">return</span> ack;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0dd357ea7dfd3dbec448fb585426b433"></a><!-- doxytag: member="GPIO.c::w2_i2c_startbit" ref="a0dd357ea7dfd3dbec448fb585426b433" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void w2_i2c_startbit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="">GPIO.c</a> ã® <a class="el" href="#L79">79</a> è¡Œã§å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚</p>
<div class="fragment"><pre class="fragment">{
        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
        <span class="comment">//SCL‚©SDA‚ª•Ğ•û‚Å‚àƒ[‚È‚çif•¶‚É//</span>
        <span class="keywordflow">if</span>(!<a class="code" href="i2c__emu_8h.html#a6d9d02b42872c081a7d096ba5c578591">W2_SCL_IN</a> || !<a class="code" href="i2c__emu_8h.html#ae9fcb5245b11fd212e7189b35e316ede">W2_SDA_IN</a>){    
        <span class="comment">//ˆÈ‰ºSCL‚ğƒ[‚É‚µ‚Ä‚©‚çSDA‚ğƒnƒC‚É//</span>
                <span class="keywordflow">if</span>(<a class="code" href="i2c__emu_8h.html#a6d9d02b42872c081a7d096ba5c578591">W2_SCL_IN</a>){
                        <a class="code" href="i2c__emu_8h.html#ac2a70fcc513b484314ffad3346670b94">W2_SCL_PUL</a>;           <span class="comment">//ƒƒWƒbƒN‚k‚É</span>
                        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
                }
                <span class="keywordflow">if</span>(!<a class="code" href="i2c__emu_8h.html#ae9fcb5245b11fd212e7189b35e316ede">W2_SDA_IN</a>){
                        <a class="code" href="i2c__emu_8h.html#aa173d8a2ebddd360cb8dc47a314f5101">W2_SDA_REL</a>;           <span class="comment">//ƒƒWƒbƒN‚g‚É</span>
                        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
                }
                <a class="code" href="i2c__emu_8h.html#a2f90f5328c82f470d083f67ce95e5504">W2_SCL_REL</a>;               <span class="comment">//ƒƒWƒbƒN‚g‚É</span>
                <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
        }
        <span class="comment">//—¼•û‚Æ‚àƒƒWƒbƒN‚g‚É‚È‚Á‚½‚çˆÈ‰º‚Ìˆ—//</span>
        <a class="code" href="i2c__emu_8h.html#afb3e5e8c155f649c7da18b0a0880d336">W2_SDA_PUL</a>;                   <span class="comment">//ƒƒWƒbƒN‚k‚É</span>
        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
        <a class="code" href="i2c__emu_8h.html#ac2a70fcc513b484314ffad3346670b94">W2_SCL_PUL</a>;                   <span class="comment">//ƒƒWƒbƒN‚k‚É</span>
        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
        <span class="comment">/* SCL = SDA = L */</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2b9aa0bd7bd232f1e67c77a938bd15d8"></a><!-- doxytag: member="GPIO.c::w2_i2c_stopbit" ref="a2b9aa0bd7bd232f1e67c77a938bd15d8" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void w2_i2c_stopbit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="">GPIO.c</a> ã® <a class="el" href="#L146">146</a> è¡Œã§å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚</p>
<div class="fragment"><pre class="fragment">{
        <span class="comment">/* assume SCL = SDA =L*/</span>
        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
        <a class="code" href="i2c__emu_8h.html#a2f90f5328c82f470d083f67ce95e5504">W2_SCL_REL</a>;
        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
        <a class="code" href="i2c__emu_8h.html#aa173d8a2ebddd360cb8dc47a314f5101">W2_SDA_REL</a>;
        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
        <span class="comment">/* SCL = SDA = H */</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a32c270cb5e51841db78ac5445925fb44"></a><!-- doxytag: member="GPIO.c::w2_i2c_write" ref="a32c270cb5e51841db78ac5445925fb44" args="(unsigned char addr, unsigned char data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char w2_i2c_write </td>
          <td>(</td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="">GPIO.c</a> ã® <a class="el" href="#L335">335</a> è¡Œã§å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚</p>
<div class="fragment"><pre class="fragment">                                                                  { <span class="comment">//Œ³‚Í*data‚¾‚Á‚½</span>

        <a class="code" href="_g_p_i_o_8c.html#a0dd357ea7dfd3dbec448fb585426b433">w2_i2c_startbit</a>();

        <span class="keywordflow">if</span>(<a class="code" href="_g_p_i_o_8c.html#aee16400315835a401d5631a5bde33ef1">w2_i2c_send_byte</a>(0x42) != 0){   <span class="comment">//slave address</span>
        <span class="comment">//      return FALSE;</span>
        }
        <span class="keywordflow">if</span>(<a class="code" href="_g_p_i_o_8c.html#aee16400315835a401d5631a5bde33ef1">w2_i2c_send_byte</a>(addr) != 0){   <span class="comment">//nack‚È‚çfalse</span>
        <span class="comment">//      return FALSE;</span>
        }
        <span class="keywordflow">if</span>(<a class="code" href="_g_p_i_o_8c.html#aee16400315835a401d5631a5bde33ef1">w2_i2c_send_byte</a>(<a class="code" href="namespacenj.html#a54b165e7142279e06643f15f96fb3385">data</a>) !=0){   <span class="comment">//nack‚È‚çfalse</span>
        <span class="comment">//      return FALSE;</span>
        }
        
        <a class="code" href="_g_p_i_o_8c.html#a2b9aa0bd7bd232f1e67c77a938bd15d8">w2_i2c_stopbit</a>();       
                
        <span class="keywordflow">return</span> <a class="code" href="_g_p_i_o_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0cf70c9d19898f6642919a75bb84bb78"></a><!-- doxytag: member="GPIO.c::w3_i2c_init" ref="a0cf70c9d19898f6642919a75bb84bb78" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void w3_i2c_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="">GPIO.c</a> ã® <a class="el" href="#L42">42</a> è¡Œã§å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚</p>
<div class="fragment"><pre class="fragment">{
         <a class="code" href="i2c__emu_8h.html#a10e194fc5c06a05fa5c7456a3549f948">W3_SCL_REL</a>;
         <a class="code" href="i2c__emu_8h.html#acf5c20b8f7b8dadd92459a4c654d36c4">W3_SDA_REL</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1b8e4cc39899fa6b9b700de08d570166"></a><!-- doxytag: member="GPIO.c::w3_i2c_send_byte" ref="a1b8e4cc39899fa6b9b700de08d570166" args="(unsigned char data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">signed int w3_i2c_send_byte </td>
          <td>(</td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="">GPIO.c</a> ã® <a class="el" href="#L265">265</a> è¡Œã§å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚</p>
<div class="fragment"><pre class="fragment">{
        <span class="comment">/* assume SCL = SDA = L */</span>
        <span class="keywordtype">signed</span> <span class="keywordtype">int</span> ack;
        <span class="keyword">volatile</span> <span class="keywordtype">int</span> i;
        <span class="keywordflow">for</span>(i = 0; i&lt;8; i++){
                <span class="keywordflow">if</span>(<a class="code" href="namespacenj.html#a54b165e7142279e06643f15f96fb3385">data</a> &amp; 0x80){  <span class="comment">//ãˆÊ‚©‚ç1bit‚Ã‚ÂSDA‚É‚Ì‚¹‚Ä“]‘—</span>
                        <a class="code" href="i2c__emu_8h.html#acf5c20b8f7b8dadd92459a4c654d36c4">W3_SDA_REL</a>;
                }
                <span class="keywordflow">else</span>{
                        <a class="code" href="i2c__emu_8h.html#a5f0763b4a047599f98a5c9700441c927">W3_SDA_PUL</a>;
                }
                        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
                        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
                        <a class="code" href="i2c__emu_8h.html#a10e194fc5c06a05fa5c7456a3549f948">W3_SCL_REL</a>; <span class="comment">//SCL‚ª‚g‚Ìó‘Ô‚ÅSDA‚ğ•ÏX‚·‚é‚Æstart‚âstop‚Æ‚È‚é</span>
                        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
                        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
                <span class="keywordflow">if</span>(i != 7){
                        <a class="code" href="namespacenj.html#a54b165e7142279e06643f15f96fb3385">data</a> &lt;&lt;= 1;
                }
                <a class="code" href="i2c__emu_8h.html#af1f3c0c52aa440265da2fcda3ecb833a">W3_SCL_PUL</a>;
        }
        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
        <a class="code" href="i2c__emu_8h.html#acf5c20b8f7b8dadd92459a4c654d36c4">W3_SDA_REL</a>;
        <a class="code" href="i2c__emu_8h.html#a10e194fc5c06a05fa5c7456a3549f948">W3_SCL_REL</a>;
        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
        <span class="comment">/* while(SCL_IN == 0);*/</span> <span class="comment">/* ƒXƒŒ[ƒu‚É‚æ‚éƒNƒƒbƒN‚Ğ‚«‚Ì‚Î‚µ */</span>
        ack = <a class="code" href="i2c__emu_8h.html#ac37390d5559889e8c2b294dd5cf4d52c">W3_SDA_IN</a>;
        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
        <a class="code" href="i2c__emu_8h.html#af1f3c0c52aa440265da2fcda3ecb833a">W3_SCL_PUL</a>;
        <a class="code" href="i2c__emu_8h.html#a5f0763b4a047599f98a5c9700441c927">W3_SDA_PUL</a>;               <span class="comment">//‚±‚±“¯‚É‚â‚ç‚È‚¢‚Æƒ_ƒ‚©‚à</span>
        <span class="comment">/* SCL = SDA = L */</span>
        <span class="keywordflow">return</span> ack;
}
</pre></div>
</div>
</div>
<a class="anchor" id="acaa592ef26c2628101baf22cb710dc2a"></a><!-- doxytag: member="GPIO.c::w3_i2c_startbit" ref="acaa592ef26c2628101baf22cb710dc2a" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void w3_i2c_startbit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="">GPIO.c</a> ã® <a class="el" href="#L104">104</a> è¡Œã§å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚</p>
<div class="fragment"><pre class="fragment">{
        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
        <span class="comment">//SCL‚©SDA‚ª•Ğ•û‚Å‚àƒ[‚È‚çif•¶‚É//</span>
        <span class="keywordflow">if</span>(!<a class="code" href="i2c__emu_8h.html#a65ce382cdb20df6ae754a1a63c946c78">W3_SCL_IN</a> || !<a class="code" href="i2c__emu_8h.html#ac37390d5559889e8c2b294dd5cf4d52c">W3_SDA_IN</a>){    
        <span class="comment">//ˆÈ‰ºSCL‚ğƒ[‚É‚µ‚Ä‚©‚çSDA‚ğƒnƒC‚É//</span>
                <span class="keywordflow">if</span>(<a class="code" href="i2c__emu_8h.html#a65ce382cdb20df6ae754a1a63c946c78">W3_SCL_IN</a>){
                        <a class="code" href="i2c__emu_8h.html#af1f3c0c52aa440265da2fcda3ecb833a">W3_SCL_PUL</a>;           <span class="comment">//ƒƒWƒbƒN‚k‚É</span>
                        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
                }
                <span class="keywordflow">if</span>(!<a class="code" href="i2c__emu_8h.html#ac37390d5559889e8c2b294dd5cf4d52c">W3_SDA_IN</a>){
                        <a class="code" href="i2c__emu_8h.html#acf5c20b8f7b8dadd92459a4c654d36c4">W3_SDA_REL</a>;           <span class="comment">//ƒƒWƒbƒN‚g‚É</span>
                        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
                }
                <a class="code" href="i2c__emu_8h.html#a10e194fc5c06a05fa5c7456a3549f948">W3_SCL_REL</a>;               <span class="comment">//ƒƒWƒbƒN‚g‚É</span>
                <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
        }
        <span class="comment">//—¼•û‚Æ‚àƒƒWƒbƒN‚g‚É‚È‚Á‚½‚çˆÈ‰º‚Ìˆ—//</span>
        <a class="code" href="i2c__emu_8h.html#a5f0763b4a047599f98a5c9700441c927">W3_SDA_PUL</a>;                   <span class="comment">//ƒƒWƒbƒN‚k‚É</span>
        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
        <a class="code" href="i2c__emu_8h.html#af1f3c0c52aa440265da2fcda3ecb833a">W3_SCL_PUL</a>;                   <span class="comment">//ƒƒWƒbƒN‚k‚É</span>
        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
        <span class="comment">/* SCL = SDA = L */</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab4940c46a9b1ad749974f8e0513b5b34"></a><!-- doxytag: member="GPIO.c::w3_i2c_stopbit" ref="ab4940c46a9b1ad749974f8e0513b5b34" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void w3_i2c_stopbit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="">GPIO.c</a> ã® <a class="el" href="#L157">157</a> è¡Œã§å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚</p>
<div class="fragment"><pre class="fragment">{
        <span class="comment">/* assume SCL = SDA =L*/</span>
        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
        <a class="code" href="i2c__emu_8h.html#a10e194fc5c06a05fa5c7456a3549f948">W3_SCL_REL</a>;
        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
        <a class="code" href="i2c__emu_8h.html#acf5c20b8f7b8dadd92459a4c654d36c4">W3_SDA_REL</a>;
        <a class="code" href="i2c__emu_8h.html#aef72fe86b7c60b1a86920496456edeac">WAIT</a>;
        <span class="comment">/* SCL = SDA = H */</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1b4f14436e98865baf42059f96b0fc9e"></a><!-- doxytag: member="GPIO.c::w3_i2c_write" ref="a1b4f14436e98865baf42059f96b0fc9e" args="(unsigned char addr, unsigned char data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char w3_i2c_write </td>
          <td>(</td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="">GPIO.c</a> ã® <a class="el" href="#L354">354</a> è¡Œã§å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚</p>
<div class="fragment"><pre class="fragment">                                                                  { <span class="comment">//Œ³‚Í*data‚¾‚Á‚½</span>

        <a class="code" href="_g_p_i_o_8c.html#acaa592ef26c2628101baf22cb710dc2a">w3_i2c_startbit</a>();

        <span class="keywordflow">if</span>(<a class="code" href="_g_p_i_o_8c.html#a1b8e4cc39899fa6b9b700de08d570166">w3_i2c_send_byte</a>(0x42) != 0){   <span class="comment">//slave address</span>
        <span class="comment">//      return FALSE;</span>
        }
        <span class="keywordflow">if</span>(<a class="code" href="_g_p_i_o_8c.html#a1b8e4cc39899fa6b9b700de08d570166">w3_i2c_send_byte</a>(addr) != 0){   <span class="comment">//nack‚È‚çfalse</span>
        <span class="comment">//      return FALSE;</span>
        }
        <span class="keywordflow">if</span>(<a class="code" href="_g_p_i_o_8c.html#a1b8e4cc39899fa6b9b700de08d570166">w3_i2c_send_byte</a>(<a class="code" href="namespacenj.html#a54b165e7142279e06643f15f96fb3385">data</a>) !=0){   <span class="comment">//nack‚È‚çfalse</span>
        <span class="comment">//      return FALSE;</span>
        }
        
        <a class="code" href="_g_p_i_o_8c.html#ab4940c46a9b1ad749974f8e0513b5b34">w3_i2c_stopbit</a>();       
                
        <span class="keywordflow">return</span> <a class="code" href="_g_p_i_o_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
}</pre></div>
</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>å…¨ã¦</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>ã‚¯ãƒ©ã‚¹</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>ãƒãƒ¼ãƒ ã‚¹ãƒšãƒ¼ã‚¹</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>ãƒ•ã‚¡ã‚¤ãƒ«</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>é–¢æ•°</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>å¤‰æ•°</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>å‹å®šç¾©</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>åˆ—æŒ™å‹</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>åˆ—æŒ™å‹ã®å€¤</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>ãƒ•ãƒ¬ãƒ³ãƒ‰</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>ãƒã‚¯ãƒ­å®šç¾©</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>STFã«å¯¾ã—ã¦Wed Mar 23 2011 05:32:41ã«ç”Ÿæˆã•ã‚Œã¾ã—ãŸã€‚&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
